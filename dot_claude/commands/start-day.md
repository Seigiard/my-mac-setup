---
name: start-day
description: |
  Начинает утреннюю сессию с диалогом о настроении и планами на день. Используй утром для старта рабочего дня или когда хочешь обновить фокус.

  <example>
  <user>/start-day</user>
  <assistant>Как ты сегодня?</assistant>
  <user>Нормально, выспался</user>
  <assistant>Отлично! В handoff остались: рефакторинг авторизации. Что включим в фокус?</assistant>
  </example>

  <example>
  <user>/start-day --light</user>
  <assistant>Вижу в handoff: тесты для API. Готов работать когда захочешь.</assistant>
  <commentary>Лёгкий режим без диалога, только контекст</commentary>
  </example>

  <example>
  <user>/start-day</user>
  <context>Большой перерыв с последнего handoff</context>
  <assistant>Давно не виделись! Хочешь кратко рассказать что происходило?</assistant>
  </example>
disable-model-invocation: true
---

Начать утреннюю сессию в Obsidian vault.

Путь к vault: `/Users/seigiard/Library/CloudStorage/Dropbox/Knowledge Base`

## Использование

```
/start-day          # Полный режим — диалог, запись в заметку
/start-day --light  # Лёгкий режим — только контекст, без записи
```

---

## Что делает команда

### 0. Определить текущую дату и время

- Выполнить: `date +"%Y-%m-%d %H:%M"`
- Результат определяет:
  - Дату для `Calendar/YYYY-MM-DD.md`
  - Время для проверки "после 12:00" (шаг 2)

### 1. Проверить дневную заметку

- Путь: `Calendar/YYYY-MM-DD.md` (сегодняшняя дата)
- Если файла нет — создать из шаблона `Extras/_templates/_daily.md`
- Если есть — прочитать

### 2. Проверить время суток

- Использовать время из шага 0
- Если после 12:00 — спросить: "Сейчас [полученное время]. Начинаем сегодня или завершаем вчера?"
- Дождаться ответа перед продолжением

### 3. Проверить повторный запуск

- Если `## Today's Focus` уже содержит буллеты (не пустой placeholder) — спросить:
  "Вижу сегодня уже запускали. Продолжить с текущим фокусом или начать заново?"

### 4. Найти предыдущий handoff

- Искать в `Calendar/*.md` последние 30 дней (от вчера назад)
- Искать непустую секцию `## Handoff` с заполненными:
  - `### Open Threads` — незакрытые задачи
  - `### Context for Tomorrow` — личный и технический контекст
- Запомнить оба раздела для использования в диалоге и формировании фокуса
- Запомнить дату последнего handoff для шага 5
- **Если не найдено или большой перерыв (>7 дней)**:
  - Предложить ретроспективу: "Давно не виделись. Хочешь кратко рассказать что происходило?"

### 5. Сканировать Claude Code сессии

- Запустить: `~/.claude/hooks/daily-summary.py LAST_HANDOFF_DATE --json`
- Получить сессии с даты последнего handoff до сегодня
- Группировать по проектам
- Запомнить для контекста приветствия

### 6. Прочитать Mood Check

- Если секция `## Mood Check` уже заполнена (не placeholder):
  - Учитывать в диалоге
  - Всё равно спросить: "Вижу ты уже написал о настроении... Хочешь добавить что-то?"

### 7. Вести открытый диалог

**Начало:** "Как ты сегодня?"

**Стиль:**

- Дружественный, поддерживающий
- Язык: русский
- Не формальный, не технический

**При тяжёлых эмоциях:**

- Дать пространство: "Если хочешь поговорить — я тут. Если нет — просто работаем."
- Не давить

**При коротких ответах ("норм", "ок"):**

- Один лёгкий фоллоу-ап: "Что-то конкретное на уме?"
- Если снова коротко — принять и двигаться дальше

**Количество вопросов:**

- Claude сам решает когда достаточно (по ситуации)
- Обычно 2-4 обмена

**Иногда (если уместно по контексту):**

- Спросить о благодарности: "За что сегодня благодарен?"

### 8. Предложить Today's Focus из handoff

- Если в handoff были Open Threads, показать их:
  "В handoff были: X, Y, Z. Что включим в сегодняшний фокус?"
- Учитывать Context for Tomorrow при формулировке (напомнить о контексте если релевантно)
- Дождаться ответа
- Сформулировать финальный список

### 9. Записать в заметку (только в полном режиме)

**В `## Mood Check`:**

- Суммаризировать разговор о настроении
- Краткое описание состояния

**В `## Today's Focus`:**

- Буллеты с задачами на день
- Формат: `- Задача`

### 10. Завершить

- Показать что записал в Mood Check и Today's Focus
- Формат: цитата из заметки

---

## Режим --light

В лёгком режиме:

- Читает заметку
- Находит handoff (Open Threads + Context for Tomorrow)
- Сканирует сессии
- Приветствует с контекстом
- НЕ ведёт диалог о настроении
- НЕ записывает в заметку

Идеален для:

- Поздний старт (после обеда)
- Низкая энергия
- Быстрый чекин
- Когда скоро `/end-day`

---

## Примеры диалога

### Обычное утро

```
Claude: Как ты сегодня?

User: Нормально, выспался

Claude: Отлично! Вижу в handoff остались: рефакторинг авторизации и тесты для API.
        Что включим в сегодняшний фокус?

User: Давай авторизацию и ещё хочу начать новую фичу

Claude: Записал в Today's Focus:
        - Рефакторинг авторизации
        - Начать новую фичу

        Удачного дня! С чего начнём?
```

### Тяжёлый день

```
Claude: Как ты сегодня?

User: Так себе, вчера был сложный день

Claude: Понимаю. Если хочешь поговорить — я тут. Если нет — просто работаем.
        Как тебе удобнее?

User: Давай просто работать

Claude: Хорошо. В handoff были: X, Y. Хочешь взять что-то из этого или сделаем
        что-то полегче сегодня?
```

### После перерыва

```
Claude: Давно не виделись! Хочешь кратко рассказать что происходило?

User: Был в отпуске, теперь возвращаюсь к работе

Claude: Отлично, надеюсь отдохнул! Что планируешь сегодня?
```

---

## Заметки

- Команда работает с одним файлом — дневной заметкой
- Никаких внешних транскриптов не создаётся
- Handoff ищется в `## Handoff` секции предыдущих дневных заметок
- Читать оба раздела: `### Open Threads` и `### Context for Tomorrow`
- Формат времени: 24h (~15:45)
- Wiki-links использовать для проектов и технологий
